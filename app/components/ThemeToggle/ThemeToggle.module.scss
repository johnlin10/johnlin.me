@import '@/app/styles/_mixins.scss';

.theme_toggle {
  // @include flexbox(row, space-between, center);
  // gap: 6px;
  height: 48px;
  width: fit-content;
  padding: 6px;
  background-color: var(--background-color-secondary);
  @include radius(30px);
  overflow: hidden;

  > .theme_toggle_container {
    @include flexbox(row, space-between, center);
    position: relative;
    width: fit-content;
    height: 100%;

    > .current_theme {
      position: absolute;
      top: 0;
      left: 0;
      width: 48px;
      min-width: 48px;
      height: 100%;
      padding: 0.5rem;
      text-align: center;
      @include radius(30px);
      @include transition(all 0.3s var(--transition-bezier));

      &:global(.light) {
        background-color: var(--color-orange);
      }

      &:global(.system) {
        width: 100%;
        left: 50%;
        @include transform(translateX(-50%));
        background-color: var(--background-color-secondary);
      }

      &:global(.dark) {
        left: 48px;
        background-color: var(--color-black);
      }
    }

    > .theme_toggle_icons {
      z-index: 10;
      @include flexbox(row, space-between, center);
      height: 100%;

      > .light_icon,
      .system_icon,
      .dark_icon {
        @include flexbox(row, center, center);
        width: 48px;
        height: 100%;
        @include radius(30px);

        > svg {
          opacity: 0;
          color: var(--color-white);
        }

        &.active {
          > svg {
            opacity: 1;
          }
        }
      }

      > .system_icon {
        z-index: 10;
        position: absolute;
        top: 0;
        left: 50%;
        width: 100%;
        opacity: 0;
        @include transform(translateX(-50%));

        &.active {
          opacity: 1;

          > svg {
            color: var(--foreground-color);
          }

          & ~ .light_icon {
            opacity: 0;
          }

          & ~ .dark_icon {
            opacity: 0;
          }
        }
      }
    }
  }

  .theme_button {
    padding: 0.75rem 1rem;
    border: 1px solid var(--border);
    border-radius: 0.375rem;
    background: var(--background);
    color: var(--foreground);
    cursor: pointer;
    font-size: 0.875rem;
    font-weight: 500;

    &:hover {
      background: var(--accent);
      color: var(--accent-foreground);
    }

    &.active {
      background: var(--primary);
      color: var(--primary-foreground);
      border-color: var(--primary);
    }

    // &:focus {
    //   outline: 2px solid var(--ring);
    //   outline-offset: 2px;
    // }
  }

  .current_theme {
    padding: 0.5rem;
    text-align: center;
    font-size: 0.875rem;
    color: var(--muted-foreground);
    background: var(--muted);
    border-radius: 0.25rem;
  }
}

//* 暗色主題的特殊樣式
:global(.dark) .theme_toggle {
  border-color: hsl(var(--border));
}
